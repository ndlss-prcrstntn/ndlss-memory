# Roadmap 0.2.0

Статусный срез для релиза `0.2.0`.

Примечание: это дорожная карта исходного scope `0..10`, приведенная к фактическому состоянию репозитория на момент релиза.

## 0. Zero-Friction Setup (DX-first)

- [x] Возможность запустить стек, просто поместив `docker-compose.yml` в папку проекта
- [x] Автоматический mount текущей директории проекта
- [x] Минимальная конфигурация через `.env` (только необходимые переменные)
- [ ] Автоматическое создание коллекции в Qdrant при старте контейнеров (сейчас создается при первом upsert/ingestion)
- [ ] Автоматический запуск full-scan при первом запуске (по умолчанию выключен bootstrap)
- [x] Понятные логи статуса индексации
- [x] Документация: "3 минуты до первого запроса" (фактически `3-5 минут`)
- [ ] Подключение к MCP-агенту без дополнительной ручной настройки (сейчас требуется явный endpoint в конфиге клиента)

## 1. Базовая инфраструктура

- [x] Подготовить базовый Docker Compose стек
- [x] Qdrant
- [x] file-indexer
- [x] mcp-server
- [x] Настроить healthcheck для всех сервисов
- [x] Настроить общую docker-сеть
- [x] Добавить volume для хранения данных Qdrant
- [x] Добавить volume/mount для индексируемых файлов

## 2. Конфигурация индексатора

- [x] Добавить `.env` / config-файл
- [x] Настроить `INDEX_FILE_TYPES`
- [x] Настроить `INDEX_EXCLUDE_PATTERNS`
- [x] Настроить пути для индексации
- [ ] Настроить все лимиты из исходной формулировки (размер файла, глубина обхода, количество файлов)
- [x] Поддержать конфигурацию через переменные окружения

## 3. Режим Full Scan

- [x] Реализовать полный обход папки
- [x] Фильтрация по поддерживаемым типам
- [x] Исключение файлов по паттернам
- [x] Логирование прогресса индексации
- [x] Обработка ошибок чтения файлов
- [x] Защита от слишком больших файлов

## 4. Пайплайн чанкинга и эмбеддингов

- [x] Реализовать разбивку файлов на чанки
- [x] Настроить размер чанка и overlap
- [x] Интегрировать генерацию эмбеддингов
- [x] Добавить retry-механику для эмбеддингов
- [x] Запись в Qdrant (upsert)
- [x] Сохранение метаданных:
- [x] путь
- [x] имя файла
- [x] тип файла
- [x] hash контента
- [x] timestamp

## 5. Идемпотентность индексации

- [x] Генерация hash контента (SHA256)
- [x] Проверка существования хеша перед upsert
- [x] Использование deterministic ID для чанков
- [x] Обновление записи при изменении файла
- [x] Удаление устаревших чанков

## 6. Режим Delta-after-commit

- [x] Интеграция с Git
- [x] Использование `git diff` для получения измененных файлов
- [x] Индексация только:
- [x] добавленных файлов
- [x] измененных файлов
- [x] удаление удаленных файлов из Qdrant
- [x] Обработка rename файлов
- [x] Фоллбек на full-scan при ошибке

## 7. MCP-инструменты поиска

- [x] Tool: semantic search
- [x] Tool: получить источник по ID
- [x] Tool: получить метаданные документа
- [x] Поддержка фильтрации по:
- [x] пути
- [x] папке
- [x] типу файла
- [x] Возврат структурированного ответа
- [x] Обработка пустых результатов

## 8. Безопасный запуск команд через MCP

- [x] Allowlist разрешенных команд
- [x] Ограничение прав контейнера (non-root)
- [x] Ограничение CPU/Memory
- [x] Таймауты выполнения команд
- [x] Структурированные ошибки
- [x] Логирование вызовов
- [x] Изоляция рабочих директорий

## 9. Качество и стабильность

- [x] Unit-тесты:
- [x] чанкинг
- [x] хеширование
- [x] фильтрация файлов
- [x] Integration-тесты:
- [x] запись в Qdrant
- [x] поиск через MCP
- [x] Contract-тесты MCP-инструментов
- [x] E2E тест:
- [x] `docker compose up`
- [x] full-scan
- [x] delta-after-commit
- [x] проверка поискового запроса
- [x] Проверка идемпотентности повторного запуска

## 10. Open-source упаковка

- [x] Подробный README
- [x] Quickstart (5-10 минут до первого поиска)
- [x] Примеры `.env`
- [x] Пример docker-compose
- [x] Описание MCP-инструментов
- [ ] Архитектурная схема в виде отдельной диаграммы/артефакта
- [x] [CONTRIBUTING](../../CONTRIBUTING.md)
- [x] `LICENSE`
- [x] Release checklist:
- [x] версия
- [x] changelog
- [x] теги
- [x] проверка Docker image
- [x] проверка примеров

## Результат

- Основной roadmap `0..10` доведен до production-ready уровня.
- `0.2.0` фиксирует этот baseline и служит точкой входа перед roadmap `0.3.0`.
