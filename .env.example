# Runtime environment example
COMPOSE_PROJECT_NAME=ndlss-memory

# Ports
QDRANT_PORT=6333
QDRANT_API_PORT=6333
MCP_PORT=8080

# File indexer modes: full-scan | delta-after-commit | watch
INDEX_MODE=full-scan
INDEX_FILE_TYPES=.md,.txt,.json,.yml,.yaml
INDEX_EXCLUDE_PATTERNS=.git,node_modules,dist,build
INDEX_MAX_FILE_SIZE_BYTES=1048576
INDEX_PROGRESS_INTERVAL_SECONDS=15
INGESTION_CHUNK_SIZE=800
INGESTION_CHUNK_OVERLAP=120
INGESTION_RETRY_MAX_ATTEMPTS=3
INGESTION_RETRY_BACKOFF_SECONDS=1.0
INGESTION_MAX_CHUNKS_PER_FILE=
INGESTION_EMBEDDING_VECTOR_SIZE=16
INGESTION_ENABLE_QDRANT_HTTP=1
INGESTION_UPSERT_TIMEOUT_SECONDS=5
INGESTION_BOOTSTRAP_ON_START=0
DELTA_GIT_BASE_REF=HEAD~1
DELTA_GIT_TARGET_REF=HEAD
DELTA_INCLUDE_RENAMES=1
DELTA_ENABLE_FALLBACK=1
DELTA_BOOTSTRAP_ON_START=0
WATCH_POLL_INTERVAL_SECONDS=5
WATCH_COALESCE_WINDOW_SECONDS=2
WATCH_RECONCILE_INTERVAL_SECONDS=60
WATCH_RETRY_MAX_ATTEMPTS=5
WATCH_RETRY_BASE_DELAY_SECONDS=1
WATCH_RETRY_MAX_DELAY_SECONDS=30
WATCH_HEARTBEAT_INTERVAL_SECONDS=30
WATCH_MAX_EVENTS_PER_CYCLE=200
QDRANT_COLLECTION_NAME=workspace_chunks
IDEMPOTENCY_HASH_ALGORITHM=sha256
IDEMPOTENCY_SKIP_UNCHANGED=1
IDEMPOTENCY_ENABLE_STALE_CLEANUP=1
IDEMPOTENCY_MAX_DELETE_BATCH=1000

# MCP command safety
COMMAND_ALLOWLIST=echo,ls,pwd,cat,grep,find
COMMAND_TIMEOUT_SECONDS=20
COMMAND_CPU_TIME_LIMIT_SECONDS=20
COMMAND_MEMORY_LIMIT_BYTES=268435456
COMMAND_RUN_AS_NON_ROOT=1
COMMAND_AUDIT_LOG_PATH=/tmp/mcp-command-audit.log
COMMAND_AUDIT_RETENTION_DAYS=7

# Startup preflight and readiness
STARTUP_PREFLIGHT_ENABLED=1
STARTUP_PREFLIGHT_TIMEOUT_SECONDS=3
STARTUP_PREFLIGHT_REQUIRE_GIT_FOR_DELTA=1
STARTUP_READY_SUMMARY_LOG_ENABLED=1
BOOTSTRAP_AUTO_INGEST_ON_START=1
BOOTSTRAP_RETRY_FAILED_ON_START=1
BOOTSTRAP_STATE_COLLECTION=workspace_bootstrap_state
MCP_ENDPOINT_PATH=/mcp

# Host workspace path mounted into file-indexer
HOST_WORKSPACE_PATH=../..

# Optional runtime status overrides for diagnostics
SERVICE_QDRANT_STATUS=healthy
SERVICE_FILE_INDEXER_STATUS=healthy
SERVICE_MCP_SERVER_STATUS=healthy


